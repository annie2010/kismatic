---
  - hosts: master[0]
    name: "{{ play_name | default('Configure Internal Docker Registry') }}"
    become: yes
    run_once: true

    roles:
      - role: docker-registry-container
        when: deploy_internal_docker_registry|bool == true and (upgrading is not defined or upgrading|bool == false) # setup a registry running on master[0]
      - role: docker-registry-images
        when: configure_docker_with_private_registry|bool == true and disconnected_installation|bool == true and seed_registry|bool == true # load docker images into the registry
